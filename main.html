<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>game forge</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
      <div class="top-nav">
        <div class="logo">
          <a href="main.html">Game Forge</a>
        </div>
        <nav>
          <ul class="main-menu">
            <li><a href="store.html">상점</a></li>
            <li><a href="mypage.html">마이페이지</a></li>
            <li><a href="community.html">자유게시판</a></li>
            <li><a href="support.html">지원</a></li>
          </ul>
        </nav>
        <div class="auth-buttons">
          <span id="welcome-message"></span>
          <a href="login.html" class="login-btn" id="login-btn">로그인</a>
          <button id="logout-btn" style="display:none;" onclick="logout()">로그아웃</button>
        </div>
      </div>
    </header>

    <main>
      <section class="content">
        <p>이곳은 메인 페이지의 콘텐츠입니다.</p>
      </section>
    </main>

    <footer>
      <div class="footer-content">
        <p>&copy; 대진대학교 벤처 졸업작품.</p>
      </div>
    </footer>

    <script>
      // 로그인 상태 확인 함수
      function checkLoginStatus() {
        const token = localStorage.getItem('token'); // 토큰 가져오기
        const nickname = localStorage.getItem('nickname'); // 닉네임 가져오기

        const welcomeMessage = document.getElementById('welcome-message');
        const loginBtn = document.getElementById('login-btn');
        const logoutBtn = document.getElementById('logout-btn');

        if (token && nickname) {
          // 로그인된 상태일 경우 환영 메시지와 로그아웃 버튼 표시
          welcomeMessage.innerText = `환영합니다, ${nickname}님!`;
          loginBtn.style.display = 'none'; // 로그인 버튼 숨김
          logoutBtn.style.display = 'inline-block'; // 로그아웃 버튼 표시
        } else {
          // 토큰이 없으면 로그인 버튼 표시
          welcomeMessage.innerText = ''; // 환영 메시지 삭제
          loginBtn.style.display = 'inline-block'; // 로그인 버튼 표시
          logoutBtn.style.display = 'none'; // 로그아웃 버튼 숨김
        }
      }

      // 로그아웃 처리 함수 (페이지 유지)
      function logout() {
        localStorage.removeItem('token'); // 토큰 삭제
        localStorage.removeItem('nickname'); // 닉네임 삭제
        checkLoginStatus(); // 로그아웃 후 상태 갱신
      }

      // 페이지 로드 시 로그인 상태 확인
      window.onload = checkLoginStatus;
    </script>
</body>
</html>
